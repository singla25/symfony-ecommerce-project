{% extends 'user/internal_base.html.twig' %}

{% block userContent %}
    <!-- Banner -->
    <div class="position-relative text-center w-100" style="height: 30vh; overflow: hidden;">
        <img src="{{ asset('img/banner/b6.jpg') }}" alt="bannerImage"
             class="w-100 h-100 position-absolute top-0 start-0" style="object-fit: cover; filter: brightness(0.7);">
        <div class="position-absolute top-50 start-50 translate-middle px-5 text-white text-center"
             style="max-width: 600px;">
            <h2 class="fw-bold my-2">#YourCart</h2>
            <p class="mb-2">Review your items, update quantities, and get ready to checkout!</p>
        </div>
    </div>

    <!-- Cart Section -->
    <div class="container my-5">
        <h2 class="text-center mb-4 fw-bold text-success">Your Shopping Cart</h2>

        {% if products|length > 0 %}
            <div class="table-responsive mb-4">
                <table class="table align-middle text-center table-bordered">
                    <thead class="table-success">
                    <tr>
                        <th style="width: 150px;">Product Image</th>
                        <th style="width: 200px;">Product Name</th>
                        <th style="width: 80px;">Size</th>
                        <th style="width: 100px;">Quantity</th>
                        <th style="width: 100px;">Price</th>
                        <th style="width: 100px;">Subtotal</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% set total = 0 %}
                    {% for product in products %}
                        {% set subtotal = product.price * product.quantity %}
                        {% set total = total + subtotal %}
                        <tr>
                            <td class="text-center">
                                <img src="{{ asset('img/products/' ~ product.productImage) }}"
                                     class="img-fluid rounded shadow-sm"
                                     style="max-height: 120px; max-width: 100%; object-fit: contain;"
                                     alt="{{ product.productName }}">
                            </td>
                            <td class="align-middle"><strong>{{ product.productName }}</strong></td>
                            <td class="align-middle">{{ product.size }}</td>
                            <td class="align-middle">{{ product.quantity }}</td>
                            <td class="align-middle">${{ product.price }}</td>
                            <td class="align-middle">${{ subtotal }}</td>
                        </tr>
                    {% endfor %}
                    <tr class="fw-bold bg-light">
                        <td colspan="4" class="text-end">Total</td>
                        <td colspan="2">${{ total }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <div class="text-end">
                <a href="#" class="btn btn-lg btn-success px-5">Proceed to Checkout</a>
            </div>
        {% else %}
            <div class="text-center py-5">
                <h4 class="text-muted">ðŸ›’ Your cart is empty</h4>
                <a href="{{ path('user_shop_page') }}" class="btn btn-outline-success mt-3">Continue Shopping</a>
            </div>
        {% endif %}
    </div>
{% endblock %}
